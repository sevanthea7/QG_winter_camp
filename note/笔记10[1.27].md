## matplotlib库学习(1月27日)

### 一.学习内容

- 基础的绘图语法
  - 散点图
  - 曲线图
  - 条形图
  - 扇形图

### 二.学习笔记

#### 1.折线图

* 体现变化规律

~~~
from matplotlib import pyplot as plt
x = range(2, 26, 2)
y = [15, 13, 14.5, 17, 20, 25, 26, 26, 24, 22, 18, 15]

plt.plot(x, y)		# 按x和y凑成坐标画图
plt.show()			# 展示所画的图
~~~

![](https://sevanthea7.oss-cn-beijing.aliyuncs.com/QGworks/202401271528703.png)

* 当x，y成某种曲线关系时绘制的是曲线图，如：

  ~~~
  x = range(2, 26, 2)
  y = [i**2 for i in x]
  fig = plt.figure(figsize=(20,8), dpi=80)
  plt.plot(x, y)
  plt.yticks(range(min(y), max(y)+1)[::20])
  plt.xticks(range(min(x), max(x)+1))
  plt.savefig('D:\pycharm\pics/w.1.27_pic7.png')
  plt.show()
  ~~~

  ![](https://sevanthea7.oss-cn-beijing.aliyuncs.com/QGworks/202401272100285.png)

##### （1）调整图片清晰度

~~~
fig = plt.figure(figsize=(20,8), dpi=80)
~~~

传入dpi参数

##### （2）保存图片

~~~
plt.savefig('D:\pycharm\pics/w.1.27_pic1.png')
~~~

![](https://sevanthea7.oss-cn-beijing.aliyuncs.com/QGworks/202401271528702.png)

##### （3）设置刻度

###### ①迭代器

~~~
plt.xticks(range(2,25))
~~~

![](https://sevanthea7.oss-cn-beijing.aliyuncs.com/QGworks/202401271847754.png)

~~~
_xtick_lables = [i/2 for i in range(4, 49)]
plt.xticks(_xtick_lables)
~~~

![](https://sevanthea7.oss-cn-beijing.aliyuncs.com/QGworks/202401271850500.png)

~~~
plt.yticks(min(y), max(y)+1)
~~~

![](https://sevanthea7.oss-cn-beijing.aliyuncs.com/QGworks/202401271853684.png)

###### ②时间点

~~~
x = range(0, 120)
y = [random.randint(20,35) for i in range(120)]
fig = plt.figure(figsize=(20,8), dpi=80)
~~~

随机生成20~35之间的整数作为10点到12点之间每一分钟的气温

~~~
_x = list(x)
_xtick_labels = ['10:{}'.format(i) for i in range(60)] + ['11:{}'.format(i) for i in range(60)]
~~~

描写时间点

~~~
plt.xtick(list(x)[::3], _xtick_labels[::3], rotation=45)
plt.yticks(range(min(y), max(y)+1))
~~~

![](https://sevanthea7.oss-cn-beijing.aliyuncs.com/QGworks/202401271917856.png)

x轴坐标：

plt.xticks(x所有点的列表， x点的显示方式， rotation=旋转的度数)

##### （4）添加描述信息

~~~
plt.rcParams['font.sans-serif'] = ['SimHei']  
# 用来正常显示中文标签
plt.rcParams['axes.unicode_minus'] = False  
# 用来正常显示负号
~~~

~~~
plt.xlabel('时间')
plt.ylabel('温度')
plt.title('10点到12点每分钟的气温变化情况')
~~~

![](https://sevanthea7.oss-cn-beijing.aliyuncs.com/QGworks/202401271931743.png)

##### （5）多条折线

~~~
y_1 = [1, 0, 1, 1, 2, 4, 3, 4, 4, 5, 6, 5, 4, 3, 1, 1, 1, 2, 3, 2]
y_2 = [1, 1, 1, 3, 2, 3, 1, 0, 3, 3, 4, 4, 6, 2, 0, 1, 0, 1, 2, 3]
plt.plot(x, y_1, label='A')
plt.plot(x, y_2, label='B')
~~~

![](https://sevanthea7.oss-cn-beijing.aliyuncs.com/QGworks/202401271950112.png)

##### （6）背景格子

~~~
plt.grid(alpha=0.4)
~~~

alpha取（0，1），越大格子线颜色越深

##### （7）绘图风格

~~~
plt.plot(x,y)
color='' [r红，g绿，b蓝，w白]
linestyle='' [--虚线，-·点划线，:虚线]
linewidth=5 [线条粗细]
alpha=0.5 [透明度]
~~~

##### （8）添加图例

~~~
plt.legend()
~~~

![](https://sevanthea7.oss-cn-beijing.aliyuncs.com/QGworks/202401272001707.png)

##### （9）注意事项

* fig要写在plot前
* 保存图片要在show前

#### 2.散点图

* 体现分布规律

~~~
plt.scatter(x, y)
~~~

#### 3.条形图

~~~
plt.bar()
~~~

* 当x是字符串时

  ~~~
  plt.bar(range(len(x)),y)
  ~~~

~~~
import string
import random
fig = plt.figure(figsize=(20,8), dpi=80)
x = [string.ascii_uppercase[i] for i in range(10)]
y = [random.randint(0,200) for i in range(10)]
plt.bar(range(len(x)),y, width=0.3, color='orange')
plt.xticks(range(len(x)), x)
plt.yticks(range(min(y), max(y)+1)[::20])
plt.show()
~~~

* 横向

  ~~~
  plt.barh()
  ~~~

  * height可以规定粗细
    * e.g.: height=0.3  

![](https://sevanthea7.oss-cn-beijing.aliyuncs.com/QGworks/202401272029378.png)

* 多次条形图

~~~
a = ['abcd', 'efgh', 'ijkl']
b_1 = [1232,325,32]
b_2 = [1364,1243,234]
b_3 = [1423,452,23]
bar_width = 0.2
x_1 = list(range(len(a)))
x_2 = [i+bar_width for i in x_1]
x_3 = [i+bar_width*2 for i in x_1]

plt.figure(figsize=(20,8), dpi=80)

plt.bar(x_1, b_1, width=bar_width, label='1.27')
plt.bar(x_2, b_2, width=bar_width, label='1.28')
plt.bar(x_3, b_3, width=bar_width, label='1.29')

plt.xticks([i + bar_width for i in range(len(a))], a)
plt.legend()
plt.savefig('D:/pycharm/pics/w.1.27_pic6.png')
plt.show()
~~~

![](https://sevanthea7.oss-cn-beijing.aliyuncs.com/QGworks/202401272048610.png)

#### 4.扇形图

~~~
plt.pie(x)
~~~

* x 扇形数据
* explode 设置某几个分块是否要分离饼图
* labels 每块扇形标签
* autopct 百分比数据标签
* shadow 是否显示阴影